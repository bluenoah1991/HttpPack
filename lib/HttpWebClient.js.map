{"version":3,"sources":["../src/HttpWebClient.js"],"names":["Request","DefaultRequestOpts","method","url","headers","credentials","checkStatus","response","status","error","Error","statusText","opts","callback","fetch","then","arrayBuffer","buffer","Buffer","Uint8Array","catch"],"mappings":";;;;;;QAqBgBA,O,GAAAA,O;;AArBhB;;AAEO,IAAMC,kDAAqB;AAC9BC,YAAQ,MADsB;AAE9BC,SAAK,yBAFyB,EAEE;AAChCC,aAAS;AACL,wBAAgB;AADX,KAHqB;AAM9BC,iBAAa;AANiB,CAA3B;;AASP,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAC7B,QAAIA,SAASC,MAAT,IAAmB,GAAnB,IAA0BD,SAASC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,eAAOD,QAAP;AACD,KAFD,MAEO;AACL,YAAIE,QAAQ,IAAIC,KAAJ,CAAUH,SAASI,UAAnB,CAAZ;AACAF,cAAMF,QAAN,GAAiBA,QAAjB;AACA,cAAME,KAAN;AACD;AACF;;AAEM,SAAST,OAAT,CAAiBY,IAAjB,EAAuBC,QAAvB,EAAgC;AACnCC,UAAMF,KAAKT,GAAX,EAAgBS,IAAhB,EAAsBG,IAAtB,CAA2BT,WAA3B,EAAwCS,IAAxC,CAA6C,UAASR,QAAT,EAAkB;AAC3D,eAAOA,SAASS,WAAT,GAAuBD,IAAvB,CAA4B,UAASE,MAAT,EAAgB;AAC/C;AACAJ,qBAAS,IAAT,EAAeN,QAAf,EAAyB,IAAIW,MAAJ,CAAW,IAAIC,UAAJ,CAAeF,MAAf,CAAX,CAAzB;AACH,SAHM,CAAP;AAIH,KALD,EAKGG,KALH,CAKS,UAASX,KAAT,EAAe;AACpBI,iBAASJ,KAAT,EAAgBA,MAAMF,QAAtB,EAAgC,IAAhC;AACH,KAPD;AAQH","file":"HttpWebClient.js","sourcesContent":["import 'whatwg-fetch';\n\nexport const DefaultRequestOpts = {\n    method: 'POST',\n    url: 'http://www.example.com/', // window.fetch does not use a url option, this is to be compatible with node\n    headers: {\n        'Content-Type': 'application/octet-stream'\n    },\n    credentials: 'same-origin'\n}\n\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    var error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nexport function Request(opts, callback){\n    fetch(opts.url, opts).then(checkStatus).then(function(response){\n        return response.arrayBuffer().then(function(buffer){\n            // https://github.com/nodejs/node/issues/106\n            callback(null, response, new Buffer(new Uint8Array(buffer)));\n        });\n    }).catch(function(error){\n        callback(error, error.response, null);\n    });\n}"]}