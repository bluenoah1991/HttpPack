{"version":3,"sources":["../src/HttpWebClient.js"],"names":["Request","DefaultRequestOpts","method","url","headers","credentials","checkStatus","response","status","error","Error","statusText","opts","callback","fetch","then","arrayBuffer","buffer","Buffer","Uint8Array","catch"],"mappings":";;;;;;QAqBgBA,O,GAAAA,O;;AArBhB;;AAEO,IAAMC,kDAAqB;AAC9BC,YAAQ,MADsB;AAE9BC,SAAK,yBAFyB,EAEE;AAChCC,aAAS;AACL,wBAAgB;AADX,KAHqB;AAM9BC,iBAAa;AANiB,CAA3B;;AASP,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAC7B,QAAIA,SAASC,MAAT,IAAmB,GAAnB,IAA0BD,SAASC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,eAAOD,QAAP;AACD,KAFD,MAEO;AACL,YAAIE,QAAQ,IAAIC,KAAJ,CAAUH,SAASI,UAAnB,CAAZ;AACAF,cAAMF,QAAN,GAAiBA,QAAjB;AACA,cAAME,KAAN;AACD;AACF;;AAEM,SAAST,OAAT,CAAiBY,IAAjB,EAAuBC,QAAvB,EAAgC;AACnCC,UAAMF,KAAKT,GAAX,EAAgBS,IAAhB,EAAsBG,IAAtB,CAA2BT,WAA3B,EAAwCS,IAAxC,CAA6C,UAASR,QAAT,EAAkB;AAC3D,eAAOA,SAASS,WAAT,GAAuBD,IAAvB,CAA4B,UAASE,MAAT,EAAgB;AAC/C;AACAJ,qBAAS,IAAT,EAAeN,QAAf,EAAyB,IAAIW,MAAJ,CAAW,IAAIC,UAAJ,CAAeF,MAAf,CAAX,CAAzB;AACH,SAHM,CAAP;AAIH,KALD,EAKGG,KALH,CAKS,UAASX,KAAT,EAAe;AACpBI,iBAASJ,KAAT,EAAgBA,MAAMF,QAAtB,EAAgC,IAAhC;AACH,KAPD;AAQH","file":"HttpWebClient.js","sourcesContent":["import 'whatwg-fetch';\r\n\r\nexport const DefaultRequestOpts = {\r\n    method: 'POST',\r\n    url: 'http://www.example.com/', // window.fetch does not use a url option, this is to be compatible with node\r\n    headers: {\r\n        'Content-Type': 'application/octet-stream'\r\n    },\r\n    credentials: 'same-origin'\r\n}\r\n\r\nfunction checkStatus(response) {\r\n  if (response.status >= 200 && response.status < 300) {\r\n    return response;\r\n  } else {\r\n    var error = new Error(response.statusText);\r\n    error.response = response;\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function Request(opts, callback){\r\n    fetch(opts.url, opts).then(checkStatus).then(function(response){\r\n        return response.arrayBuffer().then(function(buffer){\r\n            // https://github.com/nodejs/node/issues/106\r\n            callback(null, response, new Buffer(new Uint8Array(buffer)));\r\n        });\r\n    }).catch(function(error){\r\n        callback(error, error.response, null);\r\n    });\r\n}"]}